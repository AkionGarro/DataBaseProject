create or replace PACKAGE BODY PACKAGEFNNEW AS
function  fnNewappuser(p_username in VARCHAR2, 
                             p_idNumber in number,
                             p_userType in NUMBER, 
                             p_district in NUMBER,
		 	     p_password in VARCHAR2,
			     p_Email in VARCHAR2)return varchar2 as
val varchar2(50);

begin

    packagepcd.new_appuser(p_username, 
                             p_idNumber,
                             p_userType , 
                             p_district,
		 	     p_password ,
			     p_Email);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information';
     delete from people where idpeople=p_idNumber;
     return val;
    when dup_val_on_index then
     val:='Already exists';
     delete from people where idpeople=p_idNumber;
     return val;

    when others then
     val:='Wrong data';
     delete from people where idpeople=p_idNumber;
     return val;

end fnNewappuser;

function  fnNewBrand(p_nameB in varchar2)return varchar2 as
val varchar2(50);

begin

    packagepcd.new_Brand(p_nameB);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;

end fnNewBrand;
function  fnNewBuyerRating(p_idUser in number, p_rating in number)return varchar2 as
val varchar2(50);

begin

    packagepcd.new_buyerrating(p_idUSer,p_rating);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;

end fnNewBuyerRating;

function  fnNewBuySale(p_idUserS in number, p_idClock in NUMBER,
                             p_idBuyS in NUMBER)return varchar2 as
val varchar2(50);

begin

    packagepcd.new_BuySale(p_idUserS,p_idClock, p_idBuyS, SYSDATE );
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     delete from clock where idClock=p_idClock;
     return val;
    when dup_val_on_index then
     val:='Already exists';
     delete from clock where idClock=p_idClock;
     return val;
    when others then
     val:='Wrong data';
     delete from clock where idClock=p_idClock;
     return val;

end fnNewBuySale;

 function  fnNewBuyStatus(p_nameB in varchar2, p_descriptionB in varchar2)return varchar2 as
val varchar2(50);

begin
    packagepcd.new_BuyStatus(p_nameB,p_descriptionB);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;
end fnNewBuyStatus;

function  fnNewCity(p_nameC in varchar2, p_idCountry in number)return varchar2 as
val varchar2(50);

begin

    packagepcd.new_City(p_nameC,p_idCountry);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;
end fnNewCity;


 function  fnNewClockBuysale( p_idType in number,  p_idModel in NUMBER,
		 	                p_idCondition in NUMBER,
		                    p_descriptionClock in VARCHAR2,
			                p_manufactureDate in DATE,
                            p_vintage in VARCHAR2,
                            
                            p_price in VARCHAR2,p_idUserS in number,
                             p_idBuyS in NUMBER)return varchar2
as
val varchar2(50);

begin

    packagepcd.new_clock(p_idType, p_idModel,
		 	                p_idCondition ,
		                    p_descriptionClock ,
			                p_manufactureDate ,
                            p_vintage ,
                            p_price);
    val:=packagefnnew.fnnewBuySale(p_idUserS , s_clock.currval,
                             p_idBuyS );
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;
end fnNewClockBuysale;
function  fnNewCondition(p_nameC in varchar2, p_descriptionC in varchar2)return varchar2 as
val varchar2(50);

begin

    packagepcd.new_Condition(p_nameC,p_descriptionC);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;

end fnNewCondition;
 function  fnNewDistrict(p_nameD in varchar2, p_idCity in number)return varchar2 as
val varchar2(50);

begin

    packagepcd.new_City(p_nameD,p_idCity);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;
end fnNewDistrict;

function  fnNewHistory_AppuserxBuysale(p_idUser in NUMBER, 
                                              p_idSale in NUMBER)return varchar2 as
val varchar2(50);

begin

    packagepcd.new_History_AppuserxBuysale(p_idUser,p_idSale);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;
end fnNewHistory_AppuserxBuysale;

function FNNEWIDENTIFICATION(p_identification in VARCHAR2) RETURN VARCHAR2
as
val varchar2(50);

begin

    packagepcd.new_identification(p_identification);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;
end fnNEWIDENTIFICATION;

function  fnNewModelP( p_idBrand in NUMBER,
                        p_nameModel in VARCHAR2)return varchar2 as
val varchar2(50);

begin

    packagepcd.new_modelP(p_idBrand,p_nameModel);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;
end fnNewModelP;
function  fnNewMSG_userxuser(p_idWriter in number,
                                        p_idRecipient in number,
                                        p_subject in VARCHAR2,
                                        p_descriptionM IN VARCHAR2, p_sendDate in DATE)return varchar2 as
val varchar2(50);

begin

    packagepcd.new_MSG_USERXUSER(p_idWriter,
                                        p_idRecipient ,
                                        p_subject ,
                                        p_descriptionM , SYSDATE);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;
end fnNewMSG_userxuser;
function  fnNewPeopleappuser(p_identification in VARCHAR2, 
                             p_idType in NUMBER,
                             p_idGender in NUMBER, 
                             p_idCountry in NUMBER,
                             p_birthdate in DATE,
                             p_name in VARCHAR2,
                             p_surname in VARCHAR2,
                             p_secondsurname VARCHAR2,p_username in VARCHAR2, 
                             p_idNumber in number,
                             p_userType in NUMBER, 
                             p_district in NUMBER,
		 	     p_password in VARCHAR2,
			     p_Email in VARCHAR2)return varchar2 as
val varchar2(50);

begin
    packagepcd.new_people(p_identification, 
                             p_idType,
                             p_idGender, 
                             p_idCountry,
		 	     p_birthdate,
		             p_name ,
			     p_surname ,
			     p_secondsurname);

    val:=packagefnnew.fnnewappuser(p_username , 
                             s_people.currval ,
                             p_userType , 
                             p_district ,
		 	     p_password ,
			     p_Email );
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;

end fnNewPeopleappuser;


function  fnNewReview(p_descriptionR in VARCHAR2, p_rating in NUMBER)return varchar2 as
val varchar2(50);

begin

    packagepcd.new_Review(p_descriptionR,p_rating);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;
end fnNewReview;

function  fnNewSellerRating(p_idUser in number, p_rating in number)return varchar2 as
val varchar2(50);

begin

    packagepcd.new_sellerrating(p_idUSer,p_rating);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;
end fnNewSellerRating;

function  fnNewShCart_appuserxclock(p_idappuser in NUMBER,
				      p_Clock in NUMBER)return varchar2 as
val varchar2(50);

begin

    packagepcd.new_Review(p_idappuser,p_clock);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;
end fnNewShCart_appuserxclock;

function  fnNewShippingMethod(p_nameSM in VARCHAR2, p_company VARCHAR2)
return varchar2 as
val varchar2(50);

begin

    packagepcd.new_ShippingMethod(p_nameSM,p_company);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;
end fnNewShippingMethod;
function  fnNewTypeClock(p_nameT in varchar2, p_descriptionT in varchar2)return varchar2 as
val varchar2(50);

begin
    packagepcd.new_TypeClock(p_nameT,p_descriptionT);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;
end fnNewTypeClock;

function  fnNewuserType(p_nameT in varchar2, p_descriptionT in varchar2)return varchar2 as
val varchar2(50);

begin

    packagepcd.new_userType(p_nameT,p_descriptionT);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;
end fnNewUsertype;

function  fnNewWlistUserxClock( p_idUser in NUMBER, 
                        p_idClock in NUMBER)return varchar2 as
val varchar2(50);

begin

    packagepcd.new_WLISTUSERXCLOCK(p_idUser,p_idClock);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;
end fnNewWlistUserxClock;

function  fnNewPaymentMethod(p_namep in varchar2)return varchar2 as
val varchar2(50);

begin

    packagepcd.new_PaymentMethod(p_nameP);
    val:='Successfully Created';
    return val;
exception
    WHEN no_data_found THEN
     val:='Wrong or missing information'; 
     return val;
    when dup_val_on_index then
     val:='Already exists';   
     return val;
    when others then
     val:='Wrong data';
     return val;
end fnNewPaymentMethod;







END PACKAGEFNNEW;
